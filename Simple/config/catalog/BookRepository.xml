<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE gsa-template
	PUBLIC "-//Art Technology Group, Inc.//DTD Dynamo Security//EN"
	"http://www.atg.com/dtds/gsa/gsa_1.0.dtd">
<gsa-template>
	<header>
		<name>Book Repository</name>
		<author>Julia Malyshko</author>
	</header>
	<item-descriptor name="book" default="true" display-name="Book" cache-mode="simple">
		<table name="book" type="primary" id-column-names="book_id">
			<!-- properties that may (or may not) be used as primary keys -->
			<property name="id" column-name="book_id" data-type="String" />
			<property name="title" column-name="book_title" data-type="String" required="true" />
			<property name="publishing" column-name="publishing_date" data-type="Date" />
			<property name="numPages" column-name="num_pages" data-type="int" />
			<property name="genre" column-name="genre" data-type="enumerated">
				<attribute name="useCodeForValue" value="false"/>
				<option value="SCI_FI" code="200" />
				<option value="FANTASY" code="201" />
				<option value="NOVELLA" code="202" />
			</property>
		</table>
		<table name="edition" type="multi" id-column-names="book_id" multi-column-name="seq_num">
			<property name="editions" column-name="edition_name" data-type="list" component-data-type="string" />
		</table>
		<table name="illustration" type="multi" id-column-name="book_id">
			<property name="illustrations" column-name="illustration_id" data-type="set" 
				component-item-type="illustration" />
		</table>
		<table name="book_author" type="multi" id-column-name="book_id">
			<property name="authors" column-name="author_id" data-type="set" component-item-type="author" />
		</table>
	</item-descriptor>


	<item-descriptor name="illustration">
		<table name="illustration" type="primary" id-column-names="illustration_id">
			<property name="id" column-name="illustration_id" data-type="String" />
			<property name="book" column-name="book_id" data-type="String"/>
			<property name="name" column-name="illustration_name" data-type="String" />
			<property name="path" column-name="illustration_path" data-type="String" />
		</table>
	</item-descriptor>


	<item-descriptor name="author">
		<table name="author" type="primary" id-column-names="author_id">
			<property name="id" column-name="author_id" data-type="String" />
			<property name="name" column-name="author_name" data-type="String" required="true" />
		</table>
		<table name="book_author" type="multi" id-column-names="author_id">
			<property name="books" column-names="book_id" data-type="set" component-item-type="book" />
		</table>
	</item-descriptor>
</gsa-template>

